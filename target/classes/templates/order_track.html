<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8">
  <title>Track Order</title>
  <link href="/css/tailwind.css" rel="stylesheet">
  <script src="https://unpkg.com/htmx.org@2.0.2"></script>
</head>
<body>
<div class="page">
  <div class="page-header">
    <div>
      <h2>Order <span th:text="'#' + ${order.id}">#1</span></h2>
      <p class="muted" th:text="'Vendor: ' + ${order.vendor.name}">Vendor name</p>
    </div>
    <a th:href="@{|/e/${order.event.code}|}" class="btn btn-muted">&larr; Back to event</a>
  </div>

  <section class="panel">
    <h3>Status</h3>
    <div id="order-status-badge" th:replace="fragments/order_status :: badge"></div>

    <div th:if="${order.status.name() == 'READY'}" style="margin-top:24px;">
      <form th:action="@{|/e/${order.event.code}/orders/${order.id}/confirm-pickup|}" method="post"
            hx-target="#order-status-badge" hx-swap="outerHTML" hx-post="">
        <div th:if="${requirePin}" style="margin-bottom:12px;">
          <label class="muted" for="pin-input">Staff PIN</label>
          <input id="pin-input" type="password" name="pin" placeholder="Last 4 digits" class="qty-input" style="width:140px;"/>
        </div>
        <button class="btn btn-primary" type="submit">Confirm pickup</button>
      </form>
    </div>
  </section>
</div>
</body>
</html>
